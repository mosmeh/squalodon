# Based on https://github.com/cmu-db/peloton/blob/484d76df9344cb5c153a2c361c5d5018912d4cf4/test/sql/update_secondary_index_sql_test.cpp

# UpdateSecondaryIndexTest

statement ok
CREATE TABLE test (a INT PRIMARY KEY, b INT, c INT);

statement ok
INSERT INTO test VALUES
    (1, 10, 100),
    (2, 20, 200),
    (3, 30, 300);

statement ok
CREATE UNIQUE INDEX b_idx on test (b);

query III
SELECT * FROM test;
----
1 10 100
2 20 200
3 30 300

statement ok
UPDATE test SET b=1000 WHERE c=200;

query III
SELECT * FROM test WHERE b=1000;
----
2 1000 200
